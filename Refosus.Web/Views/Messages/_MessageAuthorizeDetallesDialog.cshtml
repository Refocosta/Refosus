<div class="modal fade" id="DetallesModal" tabindex="-1" role="dialog" aria-labelledby="addArticleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">
                    Detalles
                </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body col-sm-12">
                <div class="card card-success">
                    <div class="card-header">
                        <div class="card-title">
                            Tabla de adjuntos
                        </div>
                        <div class="card-tools">
                            <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i></button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="col-md-12 table-responsive">
                            <table class="table table-hover table-striped display" id="tblAdjuntos">
                            </table>
                        </div>
                    </div>
                </div>
                <div class="card card-warning">
                    <div class="card-header">
                        <div class="card-title">
                            Tabla de vistos buenos
                        </div>
                        <div class="card-tools">
                            <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i></button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="col-md-12 table-responsive">
                            <table class="table table-hover table-striped display" id="tblVistoBuenos">
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Volver</button>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    function CargarDatos(item) {
    fetch("@Url.Content("~/Messages/GetMessageAdjuntos")" + "?val=" + item)
                .then(function (result) {
                    if (result.ok) {
                        return result.json();
                    }
                })
                .then(function (data) {
                    $("#tblAdjuntos").empty();
                    $("#tblAdjuntos").append(
                        '<thead>' +
                        '<tr>' +
                        '<td>Nombre</td>' +
                        '<td></td>' +
                        '</tr>' +
                        '</thead>' +
                        "<tbody >"
                    );
                    data.forEach(function (element) {
                        var te = element.precioTotal;
                        $("#tblAdjuntos").append(
                            "<tr>"+
                            "<td>" + element.name +"</td>"+
                            "<td>" +
                            "<a href=\"" + window.location.protocol.replace("Messages/") + element.filePath.replace("~", "") + "\" download=\"" + element.name + "\" class=\"btn btn-info\">" +
                                                "<i class=\"oi oi-cloud-download style=\"color:white\"></i>"+
                            "</a>" +
                            "</td>" +
                            "</tr>"
                        );
                    })
                    $("#tblAdjuntos").append(
                        "</tbody >"
                    );
                });






        fetch("@Url.Content("~/Messages/GetMessageVO")" + "?val=" + item)
                .then(function (result) {
                    if (result.ok) {
                        return result.json();
                    }
                })
                .then(function (data) {
                    $("#tblVistoBuenos").empty();
                    $("#tblVistoBuenos").append(
                        '<thead>' +
                        '<tr>' +
                        '<td>Usuario</td>' +
                        '<td>Fecha</td>' +
                        '</tr>' +
                        '</thead>' +
                        "<tbody >"
                    );
                    data.forEach(function (element) {
                        var te = element.precioTotal;
                        $("#tblVistoBuenos").append(
                            "<tr>"+
                            "<td>" + element.user.fullName +"</td>"+
                            "<td>" + (element.dateAutLocal.replace("T", " ")).substring(0,16) +"</td>"+
                            "</tr>"
                        );
                    })
                    $("#tblVistoBuenos").append(
                        "</tbody >"
                    );
                });
        };

</script>